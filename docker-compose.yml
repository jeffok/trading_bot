services:
  api-service:
    build:
      context: .
      dockerfile: services/api_service/Dockerfile
    container_name: tbot-api-service
    env_file: .env
    environment:
      - TZ=Asia/Hong_Kong
    ports:
      - "9001:8080"
    volumes:
      - .:/app
    # tbot 工具已配置在 api-service 中，可直接使用: docker compose exec api-service tbot <command>
    restart: unless-stopped

  data-syncer:
    build:
      context: .
      dockerfile: services/data_syncer/Dockerfile
    container_name: tbot-data-syncer
    env_file: .env
    environment:
      - TZ=Asia/Hong_Kong
      - METRICS_PORT=9002
    ports:
      - "9002:9002"
    restart: unless-stopped

  strategy-engine:
    build:
      context: .
      dockerfile: services/strategy_engine/Dockerfile
    container_name: tbot-strategy-engine
    env_file: .env
    environment:
      - TZ=Asia/Hong_Kong
      - METRICS_PORT=9003
    ports:
      - "9003:9003"
    restart: unless-stopped
